jQuery(function(d){d("#copyfight_content").show();var g=navigator.userAgent.indexOf("Chrome")>-1;var c=navigator.userAgent.indexOf("Safari")>-1;if((g)&&(c)){c=false}if(c){d(".copyfight_copy_link").remove();d(".copyfight_download_link").remove()}if(copyfight.copyfight_right_click=="false"){d("#copyfight_content").contextmenu(function(h){h.preventDefault();return false})}d(".copyfight_copy_link").on("click",function(i){d("body").css("cursor","progress");i.preventDefault();var h=[];d("mark.copyfight").each(function(j,k){h[j]=k.innerText});if(h.length&&!d("#copyfight_copy").val().length){d.ajax({url:copyfight.ajax_url,type:"POST",data:{action:"copyfight_ajax",selections:h,postid:post.id},success:function(j){if(j.length){d("#copyfight_copy").attr("type","text");d("#copyfight_copy").val(j);d("#copyfight_copy").attr("type","hidden");d(".copyfight_copy_link").trigger("click")}}})}else{d("#copyfight_copy").attr("type","text");d("#copyfight_copy").select();document.execCommand("cut");d("#copyfight_copy").attr("type","hidden");d("body").css("cursor","default")}return false});d(".copyfight_download_link").on("click",function(i){d("body").css("cursor","progress");i.preventDefault();var h=[];d("mark.copyfight").each(function(j,k){h[j]=k.innerText});if(h.length){d.ajax({url:copyfight.ajax_url,type:"POST",data:{action:"copyfight_ajax",selections:h,postid:post.id},success:function(j){if(j.length){uriContent="data:application/octet-stream,"+encodeURIComponent(j);newWindow=window.open(uriContent,"copyfight-download");d("body").css("cursor","default")}}})}return false});d(".copyfight_unselect_link").on("click",function(h){d("body").css("cursor","default");h.preventDefault();d("mark").contents().unwrap();b();return false});if(copyfight.copyfight_select=="true"){d("#copyfight_content").on("mousedown",function(){window.getSelection().removeAllRanges()});d("#copyfight_content").on("mouseup",function(){if(!d("mark.copyfight").length){d("mark").contents().unwrap()}var i=window.getSelection().getRangeAt(0);window.getSelection().removeAllRanges();if(i.collapsed||Math.abs(i.endOffset-i.startOffset)<=1){return false}if(d(i.commonAncestorContainer).has("#copyfight_content").length==1){return false}var j=i.extractContents();var l=document.createElement("mark");var k=new Date().getTime();l.setAttribute("data-timestamp",k);l.setAttribute("class","copyfight");l.appendChild(j);i.insertNode(l);var h=d("#copyfight_content").html().replace(/<\/mark><mark.*?>/g,"");d("#copyfight_content").html(h);d("mark.copyfight").each(function(m,n){d(n).find("mark.copyfight").contents().unwrap()});if(!f(d("#copyfight_entry_links"))){d("html, body").animate({scrollTop:d("#copyfight_entry_links").offset().top-(window.innerHeight/2||document.documentElement.clientHeight/2)},100)}b();return false})}d(".copyfight_print_link").on("click",function(h){h.preventDefault();window.print();return false});if(copyfight.copyfight_printscreen=="false"){d(window).on("blur keydown",function(){e()});d(window).on("focus keyup",function(){a()});function e(){d("#copyfight_content noindex").wrapInner('<p class="copyfight_blurred_lines"></p>')}function a(){d(".copyfight_blurred_lines").contents().unwrap()}}function b(){if(d("mark.copyfight").length){d("#copyfight_entry_links a").show()}else{d("#copyfight_entry_links a").hide()}}if(copyfight.copyfight_console=="false"){if(window.console){console.log("%c"+copyfight.console_message,"background: #d54f27; color: #fff; font-size: x-large; padding: 3em;");window.console.log=function(){return copyfight.console_message}}}function f(h){if(typeof jQuery==="function"&&h instanceof jQuery){h=h[0]}var i=h.getBoundingClientRect();return(i.top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i.right<=(window.innerWidth||document.documentElement.clientWidth))}});